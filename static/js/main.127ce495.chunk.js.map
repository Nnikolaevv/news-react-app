{"version":3,"sources":["state/selectors/newsSelector.js","components/NewsPage/NewsItem/NewsItem.jsx","api/api.js","state/reducers/news-reducer.js","components/NewsPage/NewsPageAll/NewsPageAll.jsx","components/NewsPage/NewsPagePublisher/NewsPagePublisher.jsx","components/NewsPage/NewsPage.jsx","components/Header/Header.jsx","App.js","reportWebVitals.js","state/store/store.js","index.js"],"names":["getNews","state","newsPage","news","getCurrentPublisher","currentPublisher","NewsItem","useSelector","map","n","className","onClick","window","open","url","src","publisher_logo_url","alt","title","id","JsAPI","SET_NEWS","SET_CURRENT_PUBLISHER","SET_RESET_NEWS","initialState","setNews","newsList","type","requestNews","publisher","count","dispatch","a","api","Dao","getArticles","ArticleField","TITLE","PUBLISHER_ID","PUBLISHER_LOGO_URL","PUBLISHER_NAME","URL","articles","console","log","reason","warn","NewsPageAll","useDispatch","useEffect","NewsPagePublisher","props","history","useHistory","push","pathname","NewsPage","document","addEventListener","handleScroll","removeEventListener","event","target","documentElement","scrollHeight","scrollTop","innerHeight","exact","path","Header","toPublisher","setPublisher","to","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","reducers","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","__store__","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.127ce495.chunk.js","sourcesContent":["import {createSelector} from \"reselect\";\r\n\r\nexport const getNews = (state) => {\r\n    return state.newsPage.news\r\n};\r\n\r\nexport const getCurrentPublisher = (state) => {\r\n    return state.newsPage.currentPublisher\r\n};\r\n\r\n\r\n\r\n// export const getMovieCardInfo = createSelector(getMovies, getCurrentMoviesId, (movies, id) => {\r\n//     return movies.filter(movie => movie.id === id)\r\n// })\r\n//\r\n","import React from 'react';\r\nimport {useSelector} from \"react-redux\";\r\nimport {getNews} from \"../../../state/selectors/newsSelector\";\r\n\r\nconst NewsItem = () => {\r\n    const news = useSelector(getNews)\r\n    return (\r\n        <>\r\n            {news.map(n => (\r\n                    <div key={n.id} className='publisher-item' onClick={() => window.open(n.url)} >\r\n                        <img src={n.publisher_logo_url} alt=\"logo\"/>\r\n                        <span> {n.title}</span>\r\n                    </div>\r\n                )\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default NewsItem;","export const JsAPI = window.JsAPI\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import {JsAPI} from \"../../api/api\";\r\n\r\nconst SET_NEWS = 'news/SET_NEWS';\r\nconst SET_CURRENT_PUBLISHER = 'news/SET_CURRENT_PUBLISHER';\r\nconst SET_RESET_NEWS = 'news/SET_RESET_NEWS'\r\n\r\nconst initialState = {\r\n    news: [],\r\n    currentPublisher: null,\r\n}\r\n\r\nexport const newsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_NEWS:\r\n            return {\r\n                ...state,\r\n                news: [...state.news, ...action.newsList]\r\n            };\r\n        case SET_CURRENT_PUBLISHER:\r\n            return {\r\n                ...state,\r\n                currentPublisher: action.publisher\r\n            }\r\n        case SET_RESET_NEWS:\r\n            return {\r\n                ...state,\r\n                news: [],\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst setNews = (newsList) => ({type: SET_NEWS, newsList});\r\nexport const setPublisher = (publisher) => ({type: SET_CURRENT_PUBLISHER, publisher});\r\nexport const setResetNews = () => ({type: SET_RESET_NEWS})\r\n\r\nexport const requestNews = (publisher, count) =>  async (dispatch) => {\r\n    await api.getNews(publisher, count , dispatch)\r\n}\r\n\r\nconst api =  {\r\n    getNews(publisher = 0, count = 50,  dispatch) {\r\n        return (\r\n            JsAPI.Dao.getArticles({\r\n                \"block_id\": 84683, // Системный ID, не менять\r\n                \"count\": count, // Кол-во\r\n                \"publisher\": publisher, // Задает фильтр по источнику статьи\r\n                \"fields\": JsAPI.Dao.ArticleField.TITLE\r\n                    | JsAPI.Dao.ArticleField.PUBLISHER_ID\r\n                    | JsAPI.Dao.ArticleField.PUBLISHER_LOGO_URL\r\n                    | JsAPI.Dao.ArticleField.PUBLISHER_NAME\r\n                    | JsAPI.Dao.ArticleField.PUBLISHER_ID\r\n                    | JsAPI.Dao.ArticleField.URL,\r\n\r\n            }, function(articles) {\r\n                // статьи находятся в массиве articles\r\n                // article.id - уникальный ID\r\n                // article.title  - заголовок\r\n                // article.publisher_logo_url  - logo URL\r\n                console.log(articles)\r\n                dispatch(setNews(articles)) ;\r\n\r\n            }, function(reason) {\r\n                // Error\r\n                console.warn(reason);\r\n            })\r\n        )\r\n    }\r\n}\r\n","import React, {useEffect} from 'react';\r\n\r\nimport NewsItem from \"../NewsItem/NewsItem\";\r\nimport {requestNews} from \"../../../state/reducers/news-reducer\";\r\nimport {useDispatch} from \"react-redux\";\r\n\r\nconst NewsPageAll = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(requestNews())\r\n    },[])\r\n\r\n    return (\r\n        <div className='container'>\r\n            <div className='publisher-container'>\r\n             <NewsItem/>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NewsPageAll;\r\n\r\n","import React, {useEffect, useState} from 'react';\r\nimport {requestNews, setResetNews} from \"../../../state/reducers/news-reducer\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport NewsItem from \"../NewsItem/NewsItem\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {getCurrentPublisher} from \"../../../state/selectors/newsSelector\";\r\n\r\nconst NewsPagePublisher = (props) => {\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const currentPublisher = useSelector(getCurrentPublisher)\r\n\r\n    useEffect(() => {\r\n        history.push({\r\n            pathname: `/publisher/${currentPublisher}`\r\n        })\r\n    },[])\r\n\r\n\r\n    useEffect(() => {\r\n        dispatch(requestNews(currentPublisher))\r\n    },[currentPublisher])\r\n\r\n\r\n    return (\r\n        <div className='container'>\r\n            <div className='publisher-container'>\r\n                <NewsItem/>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NewsPagePublisher;\r\n","import React, {useEffect} from 'react';\r\nimport {Route, Switch} from \"react-router-dom\";\r\nimport NewsPageAll from \"./NewsPageAll/NewsPageAll\";\r\nimport NewsPagePublisher from \"./NewsPagePublisher/NewsPagePublisher\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {requestNews, setResetNews} from \"../../state/reducers/news-reducer\";\r\nimport {getCurrentPublisher} from \"../../state/selectors/newsSelector\";\r\n\r\nconst NewsPage = () => {\r\n    const dispatch = useDispatch()\r\n    const publisher = useSelector(getCurrentPublisher)\r\n\r\n    useEffect(() => {\r\n        dispatch(setResetNews())\r\n    }, )\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('scroll', handleScroll)\r\n        return function () {\r\n            document.removeEventListener('scroll', handleScroll)\r\n        }\r\n    },[publisher])\r\n\r\n    const handleScroll = (event) => {\r\n        const {scrollHeight, scrollTop} = event.target.documentElement\r\n        const innerHeight = window.innerHeight\r\n        if (scrollHeight - (scrollTop + innerHeight) < 100) {\r\n            dispatch(requestNews(publisher, 10))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Switch>\r\n                <Route exact path='/'>\r\n                    <NewsPageAll/>\r\n                </Route>\r\n                <Route path='/publisher/:publisherId'>\r\n                    <NewsPagePublisher/>\r\n                </Route>\r\n            </Switch>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NewsPage;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {setPublisher} from \"../../state/reducers/news-reducer\";\r\n\r\nconst Header = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const toPublisher = (publisher) => {\r\n        dispatch(setPublisher(publisher))\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <div className=\"container\">\r\n                <div className=\"inner-content\">\r\n                    <div className=\"brand\">\r\n                        <Link to='/' onClick={() => toPublisher(0)}>All News</Link>\r\n                    </div>\r\n                    <ul className=\"nav-links\">\r\n                        <li>\r\n                            <Link to='/publisher/50' onClick={() => toPublisher(50)} className='btn'> Publisher-50</Link>\r\n                        </li>\r\n                        <li>\r\n                            <Link to='/publisher/236' onClick={() => toPublisher(236)} className='btn'> Publisher-236 </Link>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;","import './App.css';\nimport {HashRouter as Router} from \"react-router-dom\";\nimport NewsPage from \"./components/NewsPage/NewsPage\";\nimport Header from \"./components/Header/Header\";\n\nfunction App() {\n    return (\n        <Router>\n            <div className=\"App\">\n                <Header/>\n                <NewsPage/>\n            </div>\n        </Router>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport {newsReducer} from \"../reducers/news-reducer\";\r\n\r\n\r\n\r\nconst reducers = combineReducers({\r\n  newsPage: newsReducer,\r\n})\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nwindow.__store__ = store;\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from \"react-redux\";\nimport store from \"./state/store/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n          <App/>\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}